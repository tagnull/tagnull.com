class HCaptcha{constructor(){this.foundForms=[];}
generateID(){const s4=()=>{return Math.floor((1+Math.random())*0x10000).toString(16).substring(1);};return s4()+'-'+s4()+'-'+s4()+'-'+s4();};getFoundFormById(id){const forms=this.foundForms.filter(form=>id===form.hCaptchaId);return forms[0];};getWidgetId=(el)=>{return el.getElementsByClassName('h-captcha')[0].getElementsByTagName('iframe')[0].dataset.hcaptchaWidgetId;};isSameOrDescendant(parent,child){let node=child;while(node){if(node===parent){return true;}
node=node.parentElement;}
return false;};validate=(event)=>{const formElement=event.currentTarget;const form=this.getFoundFormById(formElement.dataset.hCaptchaId);const submitButtonElement=formElement.querySelector(form.submitButtonSelector);if(!this.isSameOrDescendant(submitButtonElement,event.target)){return;}
event.preventDefault();this.currentForm={formElement,submitButtonElement};hcaptcha.execute(this.getWidgetId(formElement));};bindEvents=()=>{const submitButtonSelector='*[type="submit"]';[...document.querySelectorAll('form')].map(formElement=>{const hcaptchaElement=formElement.querySelector('.h-captcha');if(null===hcaptchaElement){return;}
if(null!==hcaptchaElement.querySelector('iframe')){return;}
hcaptcha.render(hcaptchaElement);if('invisible'!==hcaptchaElement.dataset.size){return;}
const hCaptchaId=this.generateID();this.foundForms.push({hCaptchaId,submitButtonSelector});formElement.dataset.hCaptchaId=hCaptchaId;formElement.addEventListener('click',this.validate,false);});};submit=()=>{this.currentForm.formElement.requestSubmit(this.currentForm.submitButtonElement);};}
const hCaptcha=new HCaptcha();window.hCaptchaGetWidgetId=hCaptcha.getWidgetId;window.hCaptchaBindEvents=hCaptcha.bindEvents;window.hCaptchaSubmit=hCaptcha.submit;window.hCaptchaOnLoad=hCaptchaBindEvents;